!function(t){var e={};function n(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=7)}([function(t,e,n){"use strict";n.d(e,"a",function(){return a});const r=1e-6;e.b=r;let a="undefined"!=typeof Float32Array?Float32Array:Array;const o=Math.random;e.c=o;Math.PI},function(t,e,n){"use strict";n(0),n(8),n(9);var r=n(4),a=n(10),o=n(11),u=n(12),c=n(5);n(6);n.d(e,"a",function(){return r}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return o}),n.d(e,"d",function(){return u}),n.d(e,"e",function(){return c})},function(t,e,n){"use strict";n.d(e,"c",function(){return r}),n.d(e,"b",function(){return a}),n.d(e,"a",function(){return o});var r=.5,a=.003,o={zoomUp:33,zoomDown:34,left:37,forward:38,right:39,back:40}},function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n(1),a=n(13),o=n(14);class u{constructor(t){let e=document.getElementById(t),n=e.getContext("webgl");this.context_=n,n.viewport(0,0,e.width,e.height),n.getExtension("OES_element_index_uint"),n.clearColor(o.c[0],o.c[1],o.c[2],o.c[3]),n.enable(n.DEPTH_TEST),n.depthFunc(n.LEQUAL),n.clearDepth(1),this.mat4Project_=r.b.create(),r.b.perspective(this.mat4Project_,Math.PI/2,e.width/e.height,o.f,o.e);let u=r.c.fromEuler(r.c.create(),o.b[0],o.b[1],o.b[2]);this.camera_=new a.a(o.a,u)}getShaderProgram(t){let e=this.context_,n=e.createProgram();for(var r in t)e.attachShader(n,t[r]);if(e.linkProgram(n),!e.getProgramParameter(n,e.LINK_STATUS))return void alert("Can`t init shader program");let a=new Object;return a.program=n,a.atrLocVertex=e.getAttribLocation(n,"aVec3_vertexPosition"),a.atrLocNormals=e.getAttribLocation(n,"aVec3_normal"),a.unifLocProjectMat=e.getUniformLocation(n,"uMat4_project"),a.unifLocCameraMat=e.getUniformLocation(n,"uMat4_cam"),a.unifLocObjectMat=e.getUniformLocation(n,"uMat4_objectPos"),a.unifLocNormalTrans=e.getUniformLocation(n,"uMat3_normalTrans"),a.unifLocLightDirect=e.getUniformLocation(n,"uVec3_reverseLightDirection"),a.unifLocColor=e.getUniformLocation(n,"uVec4_color"),a}getShader(t){let e,n=this.context_,r=document.getElementById(t),a=r.getAttribute("type");if("x-shader/x-vertex"==a)e=n.VERTEX_SHADER;else{if("x-shader/x-fragment"!=a)return void alert("Unknown shader type :"+a);e=n.FRAGMENT_SHADER}let o=r.innerHTML,u=n.createShader(e);return n.shaderSource(u,o),n.compileShader(u),n.getShaderParameter(u,n.COMPILE_STATUS)?u:(alert("Error compile shader: "+n.getShaderInfoLog(u)),void n.deleteShader(u))}loadObject(t,e,n,r,a,o,u,c,i){let s=this.context_,f={position:c,rotation:i,shaderProgram:o,color:u};var l=s.createBuffer();if(s.bindBuffer(s.ARRAY_BUFFER,l),s.bufferData(s.ARRAY_BUFFER,new Float32Array(t),s.STATIC_DRAW),f.vertexBuffer={elemSize:e,bufferSize:t.length,buffer:l},void 0!==n){let t=s.createBuffer();s.bindBuffer(s.ARRAY_BUFFER,t),s.bufferData(s.ARRAY_BUFFER,new Float32Array(n),s.STATIC_DRAW),f.normalsBuffer={elemSize:r,bufferSize:n.length,buffer:t}}let h=s.createBuffer();return s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,h),s.bufferData(s.ELEMENT_ARRAY_BUFFER,new Uint16Array(a),s.STATIC_DRAW),f.indicesBuffer={elemSize:1,bufferSize:a.length,buffer:h},f}rend(){let t=this.context_,e=this.camera_.getMatrix(),n=this.mat4Project_;t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.objects_.forEach(function(a){let u=a.shaderProgram;t.useProgram(u.program),t.uniformMatrix4fv(u.unifLocProjectMat,!1,n),t.uniformMatrix4fv(u.unifLocCameraMat,!1,e),t.uniformMatrix4fv(u.unifLocObjectMat,!1,r.b.fromRotationTranslation(r.b.create(),a.rotation,a.position));let c=r.a.normalFromMat4(r.a.create(),e);t.uniformMatrix3fv(u.unifLocNormalTrans,!1,c),t.uniform3fv(u.unifLocLightDirect,o.d),t.uniform4fv(u.unifLocColor,a.color),t.bindBuffer(t.ARRAY_BUFFER,a.vertexBuffer.buffer),t.enableVertexAttribArray(u.atrLocVertex),t.vertexAttribPointer(u.atrLocVertex,a.vertexBuffer.elemSize,t.FLOAT,!1,0,0),void 0!==a.normalsBuffer&&(t.bindBuffer(t.ARRAY_BUFFER,a.normalsBuffer.buffer),t.enableVertexAttribArray(u.atrLocNormals),t.vertexAttribPointer(u.atrLocNormals,a.normalsBuffer.elemSize,t.FLOAT,!1,0,0)),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,a.indicesBuffer.buffer),t.drawElements(t.TRIANGLES,a.indicesBuffer.bufferSize,t.UNSIGNED_SHORT,0)})}setObjectsList(t){this.objects_=t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){let t=new r.a(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},e.clone=function(t){let e=new r.a(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},e.fromValues=function(t,e,n,a,o,u,c,i,s){let f=new r.a(9);return f[0]=t,f[1]=e,f[2]=n,f[3]=a,f[4]=o,f[5]=u,f[6]=c,f[7]=i,f[8]=s,f},e.set=function(t,e,n,r,a,o,u,c,i,s){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=o,t[5]=u,t[6]=c,t[7]=i,t[8]=s,t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.transpose=function(t,e){if(t===e){let n=e[1],r=e[2],a=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=a}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},e.invert=function(t,e){let n=e[0],r=e[1],a=e[2],o=e[3],u=e[4],c=e[5],i=e[6],s=e[7],f=e[8],l=f*u-c*s,h=-f*o+c*i,M=s*o-u*i,m=n*l+r*h+a*M;if(!m)return null;return m=1/m,t[0]=l*m,t[1]=(-f*r+a*s)*m,t[2]=(c*r-a*u)*m,t[3]=h*m,t[4]=(f*n-a*i)*m,t[5]=(-c*n+a*o)*m,t[6]=M*m,t[7]=(-s*n+r*i)*m,t[8]=(u*n-r*o)*m,t},e.adjoint=function(t,e){let n=e[0],r=e[1],a=e[2],o=e[3],u=e[4],c=e[5],i=e[6],s=e[7],f=e[8];return t[0]=u*f-c*s,t[1]=a*s-r*f,t[2]=r*c-a*u,t[3]=c*i-o*f,t[4]=n*f-a*i,t[5]=a*o-n*c,t[6]=o*s-u*i,t[7]=r*i-n*s,t[8]=n*u-r*o,t},e.determinant=function(t){let e=t[0],n=t[1],r=t[2],a=t[3],o=t[4],u=t[5],c=t[6],i=t[7],s=t[8];return e*(s*o-u*i)+n*(-s*a+u*c)+r*(i*a-o*c)},e.multiply=a,e.translate=function(t,e,n){let r=e[0],a=e[1],o=e[2],u=e[3],c=e[4],i=e[5],s=e[6],f=e[7],l=e[8],h=n[0],M=n[1];return t[0]=r,t[1]=a,t[2]=o,t[3]=u,t[4]=c,t[5]=i,t[6]=h*r+M*u+s,t[7]=h*a+M*c+f,t[8]=h*o+M*i+l,t},e.rotate=function(t,e,n){let r=e[0],a=e[1],o=e[2],u=e[3],c=e[4],i=e[5],s=e[6],f=e[7],l=e[8],h=Math.sin(n),M=Math.cos(n);return t[0]=M*r+h*u,t[1]=M*a+h*c,t[2]=M*o+h*i,t[3]=M*u-h*r,t[4]=M*c-h*a,t[5]=M*i-h*o,t[6]=s,t[7]=f,t[8]=l,t},e.scale=function(t,e,n){let r=n[0],a=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},e.fromRotation=function(t,e){let n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},e.fromQuat=function(t,e){let n=e[0],r=e[1],a=e[2],o=e[3],u=n+n,c=r+r,i=a+a,s=n*u,f=r*u,l=r*c,h=a*u,M=a*c,m=a*i,d=o*u,b=o*c,g=o*i;return t[0]=1-l-m,t[3]=f-g,t[6]=h+b,t[1]=f+g,t[4]=1-s-m,t[7]=M-d,t[2]=h-b,t[5]=M+d,t[8]=1-s-l,t},e.normalFromMat4=function(t,e){let n=e[0],r=e[1],a=e[2],o=e[3],u=e[4],c=e[5],i=e[6],s=e[7],f=e[8],l=e[9],h=e[10],M=e[11],m=e[12],d=e[13],b=e[14],g=e[15],p=n*c-r*u,v=n*i-a*u,w=n*s-o*u,x=r*i-a*c,y=r*s-o*c,A=a*s-o*i,_=f*d-l*m,E=f*b-h*m,R=f*g-M*m,q=l*b-h*d,L=l*g-M*d,S=h*g-M*b,T=p*S-v*L+w*q+x*R-y*E+A*_;if(!T)return null;return T=1/T,t[0]=(c*S-i*L+s*q)*T,t[1]=(i*R-u*S-s*E)*T,t[2]=(u*L-c*R+s*_)*T,t[3]=(a*L-r*S-o*q)*T,t[4]=(n*S-a*R+o*E)*T,t[5]=(r*R-n*L-o*_)*T,t[6]=(d*A-b*y+g*x)*T,t[7]=(b*w-m*A-g*v)*T,t[8]=(m*y-d*w+g*p)*T,t},e.projection=function(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},e.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t},e.subtract=o,e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},e.equals=function(t,e){let n=t[0],a=t[1],o=t[2],u=t[3],c=t[4],i=t[5],s=t[6],f=t[7],l=t[8],h=e[0],M=e[1],m=e[2],d=e[3],b=e[4],g=e[5],p=e[6],v=e[7],w=e[8];return Math.abs(n-h)<=r.b*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(a-M)<=r.b*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(o-m)<=r.b*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(u-d)<=r.b*Math.max(1,Math.abs(u),Math.abs(d))&&Math.abs(c-b)<=r.b*Math.max(1,Math.abs(c),Math.abs(b))&&Math.abs(i-g)<=r.b*Math.max(1,Math.abs(i),Math.abs(g))&&Math.abs(s-p)<=r.b*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(f-v)<=r.b*Math.max(1,Math.abs(f),Math.abs(v))&&Math.abs(l-w)<=r.b*Math.max(1,Math.abs(l),Math.abs(w))};var r=n(0);function a(t,e,n){let r=e[0],a=e[1],o=e[2],u=e[3],c=e[4],i=e[5],s=e[6],f=e[7],l=e[8],h=n[0],M=n[1],m=n[2],d=n[3],b=n[4],g=n[5],p=n[6],v=n[7],w=n[8];return t[0]=h*r+M*u+m*s,t[1]=h*a+M*c+m*f,t[2]=h*o+M*i+m*l,t[3]=d*r+b*u+g*s,t[4]=d*a+b*c+g*f,t[5]=d*o+b*i+g*l,t[6]=p*r+v*u+w*s,t[7]=p*a+v*c+w*f,t[8]=p*o+v*i+w*l,t}function o(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}const u=a;e.mul=u;const c=o;e.sub=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.create=a,e.clone=function(t){var e=new r.a(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},e.length=o,e.fromValues=u,e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},e.set=function(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},e.subtract=c,e.multiply=i,e.divide=s,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},e.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},e.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t},e.distance=f,e.squaredDistance=l,e.squaredLength=h,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},e.normalize=M,e.dot=m,e.cross=function(t,e,n){let r=e[0],a=e[1],o=e[2],u=n[0],c=n[1],i=n[2];return t[0]=a*i-o*c,t[1]=o*u-r*i,t[2]=r*c-a*u,t},e.lerp=function(t,e,n,r){let a=e[0],o=e[1],u=e[2];return t[0]=a+r*(n[0]-a),t[1]=o+r*(n[1]-o),t[2]=u+r*(n[2]-u),t},e.hermite=function(t,e,n,r,a,o){let u=o*o,c=u*(2*o-3)+1,i=u*(o-2)+o,s=u*(o-1),f=u*(3-2*o);return t[0]=e[0]*c+n[0]*i+r[0]*s+a[0]*f,t[1]=e[1]*c+n[1]*i+r[1]*s+a[1]*f,t[2]=e[2]*c+n[2]*i+r[2]*s+a[2]*f,t},e.bezier=function(t,e,n,r,a,o){let u=1-o,c=u*u,i=o*o,s=c*u,f=3*o*c,l=3*i*u,h=i*o;return t[0]=e[0]*s+n[0]*f+r[0]*l+a[0]*h,t[1]=e[1]*s+n[1]*f+r[1]*l+a[1]*h,t[2]=e[2]*s+n[2]*f+r[2]*l+a[2]*h,t},e.random=function(t,e){e=e||1;let n=2*r.c()*Math.PI,a=2*r.c()-1,o=Math.sqrt(1-a*a)*e;return t[0]=Math.cos(n)*o,t[1]=Math.sin(n)*o,t[2]=a*e,t},e.transformMat4=function(t,e,n){let r=e[0],a=e[1],o=e[2],u=n[3]*r+n[7]*a+n[11]*o+n[15];return u=u||1,t[0]=(n[0]*r+n[4]*a+n[8]*o+n[12])/u,t[1]=(n[1]*r+n[5]*a+n[9]*o+n[13])/u,t[2]=(n[2]*r+n[6]*a+n[10]*o+n[14])/u,t},e.transformMat3=function(t,e,n){let r=e[0],a=e[1],o=e[2];return t[0]=r*n[0]+a*n[3]+o*n[6],t[1]=r*n[1]+a*n[4]+o*n[7],t[2]=r*n[2]+a*n[5]+o*n[8],t},e.transformQuat=function(t,e,n){let r=e[0],a=e[1],o=e[2],u=n[0],c=n[1],i=n[2],s=n[3],f=s*r+c*o-i*a,l=s*a+i*r-u*o,h=s*o+u*a-c*r,M=-u*r-c*a-i*o;return t[0]=f*s+M*-u+l*-i-h*-c,t[1]=l*s+M*-c+h*-u-f*-i,t[2]=h*s+M*-i+f*-c-l*-u,t},e.rotateX=function(t,e,n,r){let a=[],o=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],o[0]=a[0],o[1]=a[1]*Math.cos(r)-a[2]*Math.sin(r),o[2]=a[1]*Math.sin(r)+a[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},e.rotateY=function(t,e,n,r){let a=[],o=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],o[0]=a[2]*Math.sin(r)+a[0]*Math.cos(r),o[1]=a[1],o[2]=a[2]*Math.cos(r)-a[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},e.rotateZ=function(t,e,n,r){let a=[],o=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],o[0]=a[0]*Math.cos(r)-a[1]*Math.sin(r),o[1]=a[0]*Math.sin(r)+a[1]*Math.cos(r),o[2]=a[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},e.angle=function(t,e){let n=u(t[0],t[1],t[2]),r=u(e[0],e[1],e[2]);M(n,n),M(r,r);let a=m(n,r);return a>1?0:a<-1?Math.PI:Math.acos(a)},e.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},e.equals=function(t,e){let n=t[0],a=t[1],o=t[2],u=e[0],c=e[1],i=e[2];return Math.abs(n-u)<=r.b*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(a-c)<=r.b*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(o-i)<=r.b*Math.max(1,Math.abs(o),Math.abs(i))};var r=n(0);function a(){let t=new r.a(3);return t[0]=0,t[1]=0,t[2]=0,t}function o(t){let e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}function u(t,e,n){let a=new r.a(3);return a[0]=t,a[1]=e,a[2]=n,a}function c(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function i(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function s(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function f(t,e){let n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2];return Math.sqrt(n*n+r*r+a*a)}function l(t,e){let n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2];return n*n+r*r+a*a}function h(t){let e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function M(t,e){let n=e[0],r=e[1],a=e[2],o=n*n+r*r+a*a;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t}function m(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}const d=c;e.sub=d;const b=i;e.mul=b;const g=s;e.div=g;const p=f;e.dist=p;const v=l;e.sqrDist=v;const w=o;e.len=w;const x=h;e.sqrLen=x;const y=function(){let t=a();return function(e,n,r,a,o,u){let c,i;for(n||(n=3),r||(r=0),i=a?Math.min(a*n+r,e.length):e.length,c=r;c<i;c+=n)t[0]=e[c],t[1]=e[c+1],t[2]=e[c+2],o(t,t,u),e[c]=t[0],e[c+1]=t[1],e[c+2]=t[2];return e}}();e.forEach=y},function(t,e,n){"use strict";e.b=function(t){let e=new r.a(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},e.g=function(t,e,n,a){let o=new r.a(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=a,o},e.c=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},e.l=function(t,e,n,r,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t},e.a=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},e.k=a,e.h=o,e.m=u,e.j=c,e.d=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},e.i=function(t,e,n,r){let a=e[0],o=e[1],u=e[2],c=e[3];return t[0]=a+r*(n[0]-a),t[1]=o+r*(n[1]-o),t[2]=u+r*(n[2]-u),t[3]=c+r*(n[3]-c),t},e.f=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},e.e=function(t,e){let n=t[0],a=t[1],o=t[2],u=t[3],c=e[0],i=e[1],s=e[2],f=e[3];return Math.abs(n-c)<=r.b*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(a-i)<=r.b*Math.max(1,Math.abs(a),Math.abs(i))&&Math.abs(o-s)<=r.b*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(u-f)<=r.b*Math.max(1,Math.abs(u),Math.abs(f))};var r=n(0);function a(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function o(t){let e=t[0],n=t[1],r=t[2],a=t[3];return Math.sqrt(e*e+n*n+r*r+a*a)}function u(t){let e=t[0],n=t[1],r=t[2],a=t[3];return e*e+n*n+r*r+a*a}function c(t,e){let n=e[0],r=e[1],a=e[2],o=e[3],u=n*n+r*r+a*a+o*o;return u>0&&(u=1/Math.sqrt(u),t[0]=n*u,t[1]=r*u,t[2]=a*u,t[3]=o*u),t}!function(){let t=function(){let t=new r.a(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}()}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,a,o=n(3),u=(n(2),n(15)),c=n(16),i=n(17),s=n(1);function f(t){var e=new FileReader;e.onload=function(){var t=this.result;a=new Object;let e=new Uint32Array(t,0,2);a.vertex=new Float32Array(t,8,e[0]/4),a.face=new Uint32Array(t,8+e[0],e[1]/4);let n=[h.getShader("vertex-water-shader"),h.getShader("fragment-water-shader")],r=h.getShaderProgram(n),o=h.loadObject(a.vertex,3,void 0,3,a.face,r,[0,0,.6,1],s.e.fromValues(0,0,0),s.c.create());void 0!==o&&(M[1]=o,h.rend())},e.readAsArrayBuffer(t.data)}function l(t){var e=new FileReader;e.onload=function(){var t=this.result;a.vertex=r.vertex,a.face=new Uint32Array(t);let e=[h.getShader("vertex-water-shader"),h.getShader("fragment-water-shader")],n=h.getShaderProgram(e),o=h.loadObject(a.vertex,3,void 0,3,a.face,n,[0,0,.6,1],s.e.fromValues(0,0,0),s.c.create());void 0!==o&&(M[1]=o,h.rend())},e.readAsArrayBuffer(t.data)}var h=new o.a("viewport"),M=new Array;function m(t){let e=t.reduce(function(t,e){return t+e.byteLength},0),n=new Uint8Array(e),r=0;for(let e in t){let a=new Uint8Array(t[e].buffer);n.set(a,r),r+=a.byteLength}return n}h.setObjectsList(M),u.a("viewport",h,M),document.getElementById("file-path").onchange=function(){document.getElementById("load-massage").style.display="block";let t=new FileReader,e=document.getElementById("file-path").files[0];t.onload=function(t){let e=i.a("ply",t.target.result),n=[h.getShader("vertex-shader"),h.getShader("fragment-shader")],a=h.getShaderProgram(n),o=h.loadObject(e.vertex,3,e.normals,3,e.face,a,[0,.6,0,1],s.e.fromValues(0,0,0),s.c.create());void 0!==o&&(M[0]=o,r=e,h.rend()),document.getElementById("load-massage").style.display="none"},t.onerror=function(t){alert("Error load file"),document.getElementById("load-massage").style.display="none"},t.readAsArrayBuffer(e)},document.getElementById("start-button").onclick=function(){let t=m([new Uint8Array([0]),new Uint32Array([4*r.vertex.length,4*r.face.length]),new Float32Array(r.vertex),new Uint32Array(r.face)]);c.a(t,f)},document.getElementById("border-faces-button").onclick=function(){let t=m([new Uint8Array([1]),new Uint32Array([4*r.vertex.length,4*r.face.length]),new Float32Array(r.vertex),new Uint32Array(r.face)]);c.a(t,l)},document.getElementById("fruct-faces-button").onclick=function(){let t=m([new Uint8Array([2]),new Uint32Array([4*r.vertex.length,4*r.face.length]),new Float32Array(r.vertex),new Uint32Array(r.face)]);c.a(t,l)}},function(t,e,n){"use strict";n(0)},function(t,e,n){"use strict";n(0)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){let t=new r.a(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.clone=function(t){let e=new r.a(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.fromValues=function(t,e,n,a,o,u,c,i,s,f,l,h,M,m,d,b){let g=new r.a(16);return g[0]=t,g[1]=e,g[2]=n,g[3]=a,g[4]=o,g[5]=u,g[6]=c,g[7]=i,g[8]=s,g[9]=f,g[10]=l,g[11]=h,g[12]=M,g[13]=m,g[14]=d,g[15]=b,g},e.set=function(t,e,n,r,a,o,u,c,i,s,f,l,h,M,m,d,b){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=o,t[5]=u,t[6]=c,t[7]=i,t[8]=s,t[9]=f,t[10]=l,t[11]=h,t[12]=M,t[13]=m,t[14]=d,t[15]=b,t},e.identity=a,e.transpose=function(t,e){if(t===e){let n=e[1],r=e[2],a=e[3],o=e[6],u=e[7],c=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=a,t[13]=u,t[14]=c}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},e.invert=function(t,e){let n=e[0],r=e[1],a=e[2],o=e[3],u=e[4],c=e[5],i=e[6],s=e[7],f=e[8],l=e[9],h=e[10],M=e[11],m=e[12],d=e[13],b=e[14],g=e[15],p=n*c-r*u,v=n*i-a*u,w=n*s-o*u,x=r*i-a*c,y=r*s-o*c,A=a*s-o*i,_=f*d-l*m,E=f*b-h*m,R=f*g-M*m,q=l*b-h*d,L=l*g-M*d,S=h*g-M*b,T=p*S-v*L+w*q+x*R-y*E+A*_;if(!T)return null;return T=1/T,t[0]=(c*S-i*L+s*q)*T,t[1]=(a*L-r*S-o*q)*T,t[2]=(d*A-b*y+g*x)*T,t[3]=(h*y-l*A-M*x)*T,t[4]=(i*R-u*S-s*E)*T,t[5]=(n*S-a*R+o*E)*T,t[6]=(b*w-m*A-g*v)*T,t[7]=(f*A-h*w+M*v)*T,t[8]=(u*L-c*R+s*_)*T,t[9]=(r*R-n*L-o*_)*T,t[10]=(m*y-d*w+g*p)*T,t[11]=(l*w-f*y-M*p)*T,t[12]=(c*E-u*q-i*_)*T,t[13]=(n*q-r*E+a*_)*T,t[14]=(d*v-m*x-b*p)*T,t[15]=(f*x-l*v+h*p)*T,t},e.adjoint=function(t,e){let n=e[0],r=e[1],a=e[2],o=e[3],u=e[4],c=e[5],i=e[6],s=e[7],f=e[8],l=e[9],h=e[10],M=e[11],m=e[12],d=e[13],b=e[14],g=e[15];return t[0]=c*(h*g-M*b)-l*(i*g-s*b)+d*(i*M-s*h),t[1]=-(r*(h*g-M*b)-l*(a*g-o*b)+d*(a*M-o*h)),t[2]=r*(i*g-s*b)-c*(a*g-o*b)+d*(a*s-o*i),t[3]=-(r*(i*M-s*h)-c*(a*M-o*h)+l*(a*s-o*i)),t[4]=-(u*(h*g-M*b)-f*(i*g-s*b)+m*(i*M-s*h)),t[5]=n*(h*g-M*b)-f*(a*g-o*b)+m*(a*M-o*h),t[6]=-(n*(i*g-s*b)-u*(a*g-o*b)+m*(a*s-o*i)),t[7]=n*(i*M-s*h)-u*(a*M-o*h)+f*(a*s-o*i),t[8]=u*(l*g-M*d)-f*(c*g-s*d)+m*(c*M-s*l),t[9]=-(n*(l*g-M*d)-f*(r*g-o*d)+m*(r*M-o*l)),t[10]=n*(c*g-s*d)-u*(r*g-o*d)+m*(r*s-o*c),t[11]=-(n*(c*M-s*l)-u*(r*M-o*l)+f*(r*s-o*c)),t[12]=-(u*(l*b-h*d)-f*(c*b-i*d)+m*(c*h-i*l)),t[13]=n*(l*b-h*d)-f*(r*b-a*d)+m*(r*h-a*l),t[14]=-(n*(c*b-i*d)-u*(r*b-a*d)+m*(r*i-a*c)),t[15]=n*(c*h-i*l)-u*(r*h-a*l)+f*(r*i-a*c),t},e.determinant=function(t){let e=t[0],n=t[1],r=t[2],a=t[3],o=t[4],u=t[5],c=t[6],i=t[7],s=t[8],f=t[9],l=t[10],h=t[11],M=t[12],m=t[13],d=t[14],b=t[15];return(e*u-n*o)*(l*b-h*d)-(e*c-r*o)*(f*b-h*m)+(e*i-a*o)*(f*d-l*m)+(n*c-r*u)*(s*b-h*M)-(n*i-a*u)*(s*d-l*M)+(r*i-a*c)*(s*m-f*M)},e.multiply=o,e.translate=function(t,e,n){let r,a,o,u,c,i,s,f,l,h,M,m,d=n[0],b=n[1],g=n[2];e===t?(t[12]=e[0]*d+e[4]*b+e[8]*g+e[12],t[13]=e[1]*d+e[5]*b+e[9]*g+e[13],t[14]=e[2]*d+e[6]*b+e[10]*g+e[14],t[15]=e[3]*d+e[7]*b+e[11]*g+e[15]):(r=e[0],a=e[1],o=e[2],u=e[3],c=e[4],i=e[5],s=e[6],f=e[7],l=e[8],h=e[9],M=e[10],m=e[11],t[0]=r,t[1]=a,t[2]=o,t[3]=u,t[4]=c,t[5]=i,t[6]=s,t[7]=f,t[8]=l,t[9]=h,t[10]=M,t[11]=m,t[12]=r*d+c*b+l*g+e[12],t[13]=a*d+i*b+h*g+e[13],t[14]=o*d+s*b+M*g+e[14],t[15]=u*d+f*b+m*g+e[15]);return t},e.scale=function(t,e,n){let r=n[0],a=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.rotate=function(t,e,n,a){let o,u,c,i,s,f,l,h,M,m,d,b,g,p,v,w,x,y,A,_,E,R,q,L,S=a[0],T=a[1],P=a[2],B=Math.sqrt(S*S+T*T+P*P);if(Math.abs(B)<r.b)return null;S*=B=1/B,T*=B,P*=B,o=Math.sin(n),u=Math.cos(n),c=1-u,i=e[0],s=e[1],f=e[2],l=e[3],h=e[4],M=e[5],m=e[6],d=e[7],b=e[8],g=e[9],p=e[10],v=e[11],w=S*S*c+u,x=T*S*c+P*o,y=P*S*c-T*o,A=S*T*c-P*o,_=T*T*c+u,E=P*T*c+S*o,R=S*P*c+T*o,q=T*P*c-S*o,L=P*P*c+u,t[0]=i*w+h*x+b*y,t[1]=s*w+M*x+g*y,t[2]=f*w+m*x+p*y,t[3]=l*w+d*x+v*y,t[4]=i*A+h*_+b*E,t[5]=s*A+M*_+g*E,t[6]=f*A+m*_+p*E,t[7]=l*A+d*_+v*E,t[8]=i*R+h*q+b*L,t[9]=s*R+M*q+g*L,t[10]=f*R+m*q+p*L,t[11]=l*R+d*q+v*L,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t},e.rotateX=function(t,e,n){let r=Math.sin(n),a=Math.cos(n),o=e[4],u=e[5],c=e[6],i=e[7],s=e[8],f=e[9],l=e[10],h=e[11];e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[4]=o*a+s*r,t[5]=u*a+f*r,t[6]=c*a+l*r,t[7]=i*a+h*r,t[8]=s*a-o*r,t[9]=f*a-u*r,t[10]=l*a-c*r,t[11]=h*a-i*r,t},e.rotateY=function(t,e,n){let r=Math.sin(n),a=Math.cos(n),o=e[0],u=e[1],c=e[2],i=e[3],s=e[8],f=e[9],l=e[10],h=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=o*a-s*r,t[1]=u*a-f*r,t[2]=c*a-l*r,t[3]=i*a-h*r,t[8]=o*r+s*a,t[9]=u*r+f*a,t[10]=c*r+l*a,t[11]=i*r+h*a,t},e.rotateZ=function(t,e,n){let r=Math.sin(n),a=Math.cos(n),o=e[0],u=e[1],c=e[2],i=e[3],s=e[4],f=e[5],l=e[6],h=e[7];e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=o*a+s*r,t[1]=u*a+f*r,t[2]=c*a+l*r,t[3]=i*a+h*r,t[4]=s*a-o*r,t[5]=f*a-u*r,t[6]=l*a-c*r,t[7]=h*a-i*r,t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotation=function(t,e,n){let a,o,u,c=n[0],i=n[1],s=n[2],f=Math.sqrt(c*c+i*i+s*s);if(Math.abs(f)<r.b)return null;return c*=f=1/f,i*=f,s*=f,a=Math.sin(e),o=Math.cos(e),u=1-o,t[0]=c*c*u+o,t[1]=i*c*u+s*a,t[2]=s*c*u-i*a,t[3]=0,t[4]=c*i*u-s*a,t[5]=i*i*u+o,t[6]=s*i*u+c*a,t[7]=0,t[8]=c*s*u+i*a,t[9]=i*s*u-c*a,t[10]=s*s*u+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromXRotation=function(t,e){let n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromYRotation=function(t,e){let n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromZRotation=function(t,e){let n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotationTranslation=function(t,e,n){let r=e[0],a=e[1],o=e[2],u=e[3],c=r+r,i=a+a,s=o+o,f=r*c,l=r*i,h=r*s,M=a*i,m=a*s,d=o*s,b=u*c,g=u*i,p=u*s;return t[0]=1-(M+d),t[1]=l+p,t[2]=h-g,t[3]=0,t[4]=l-p,t[5]=1-(f+d),t[6]=m+b,t[7]=0,t[8]=h+g,t[9]=m-b,t[10]=1-(f+M),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},e.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},e.getScaling=function(t,e){let n=e[0],r=e[1],a=e[2],o=e[4],u=e[5],c=e[6],i=e[8],s=e[9],f=e[10];return t[0]=Math.sqrt(n*n+r*r+a*a),t[1]=Math.sqrt(o*o+u*u+c*c),t[2]=Math.sqrt(i*i+s*s+f*f),t},e.getRotation=function(t,e){let n=e[0]+e[5]+e[10],r=0;n>0?(r=2*Math.sqrt(n+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r);return t},e.fromRotationTranslationScale=function(t,e,n,r){let a=e[0],o=e[1],u=e[2],c=e[3],i=a+a,s=o+o,f=u+u,l=a*i,h=a*s,M=a*f,m=o*s,d=o*f,b=u*f,g=c*i,p=c*s,v=c*f,w=r[0],x=r[1],y=r[2];return t[0]=(1-(m+b))*w,t[1]=(h+v)*w,t[2]=(M-p)*w,t[3]=0,t[4]=(h-v)*x,t[5]=(1-(l+b))*x,t[6]=(d+g)*x,t[7]=0,t[8]=(M+p)*y,t[9]=(d-g)*y,t[10]=(1-(l+m))*y,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},e.fromRotationTranslationScaleOrigin=function(t,e,n,r,a){let o=e[0],u=e[1],c=e[2],i=e[3],s=o+o,f=u+u,l=c+c,h=o*s,M=o*f,m=o*l,d=u*f,b=u*l,g=c*l,p=i*s,v=i*f,w=i*l,x=r[0],y=r[1],A=r[2],_=a[0],E=a[1],R=a[2];return t[0]=(1-(d+g))*x,t[1]=(M+w)*x,t[2]=(m-v)*x,t[3]=0,t[4]=(M-w)*y,t[5]=(1-(h+g))*y,t[6]=(b+p)*y,t[7]=0,t[8]=(m+v)*A,t[9]=(b-p)*A,t[10]=(1-(h+d))*A,t[11]=0,t[12]=n[0]+_-(t[0]*_+t[4]*E+t[8]*R),t[13]=n[1]+E-(t[1]*_+t[5]*E+t[9]*R),t[14]=n[2]+R-(t[2]*_+t[6]*E+t[10]*R),t[15]=1,t},e.fromQuat=function(t,e){let n=e[0],r=e[1],a=e[2],o=e[3],u=n+n,c=r+r,i=a+a,s=n*u,f=r*u,l=r*c,h=a*u,M=a*c,m=a*i,d=o*u,b=o*c,g=o*i;return t[0]=1-l-m,t[1]=f+g,t[2]=h-b,t[3]=0,t[4]=f-g,t[5]=1-s-m,t[6]=M+d,t[7]=0,t[8]=h+b,t[9]=M-d,t[10]=1-s-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.frustum=function(t,e,n,r,a,o,u){let c=1/(n-e),i=1/(a-r),s=1/(o-u);return t[0]=2*o*c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*i,t[6]=0,t[7]=0,t[8]=(n+e)*c,t[9]=(a+r)*i,t[10]=(u+o)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=u*o*2*s,t[15]=0,t},e.perspective=function(t,e,n,r,a){let o=1/Math.tan(e/2),u=1/(r-a);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(a+r)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*a*r*u,t[15]=0,t},e.perspectiveFromFieldOfView=function(t,e,n,r){let a=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),u=Math.tan(e.leftDegrees*Math.PI/180),c=Math.tan(e.rightDegrees*Math.PI/180),i=2/(u+c),s=2/(a+o);return t[0]=i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=-(u-c)*i*.5,t[9]=(a-o)*s*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t},e.ortho=function(t,e,n,r,a,o,u){let c=1/(e-n),i=1/(r-a),s=1/(o-u);return t[0]=-2*c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*s,t[11]=0,t[12]=(e+n)*c,t[13]=(a+r)*i,t[14]=(u+o)*s,t[15]=1,t},e.lookAt=function(t,e,n,o){let u,c,i,s,f,l,h,M,m,d,b=e[0],g=e[1],p=e[2],v=o[0],w=o[1],x=o[2],y=n[0],A=n[1],_=n[2];if(Math.abs(b-y)<r.b&&Math.abs(g-A)<r.b&&Math.abs(p-_)<r.b)return a(t);h=b-y,M=g-A,m=p-_,d=1/Math.sqrt(h*h+M*M+m*m),u=w*(m*=d)-x*(M*=d),c=x*(h*=d)-v*m,i=v*M-w*h,(d=Math.sqrt(u*u+c*c+i*i))?(u*=d=1/d,c*=d,i*=d):(u=0,c=0,i=0);s=M*i-m*c,f=m*u-h*i,l=h*c-M*u,(d=Math.sqrt(s*s+f*f+l*l))?(s*=d=1/d,f*=d,l*=d):(s=0,f=0,l=0);return t[0]=u,t[1]=s,t[2]=h,t[3]=0,t[4]=c,t[5]=f,t[6]=M,t[7]=0,t[8]=i,t[9]=l,t[10]=m,t[11]=0,t[12]=-(u*b+c*g+i*p),t[13]=-(s*b+f*g+l*p),t[14]=-(h*b+M*g+m*p),t[15]=1,t},e.targetTo=function(t,e,n,r){let a=e[0],o=e[1],u=e[2],c=r[0],i=r[1],s=r[2],f=a-n[0],l=o-n[1],h=u-n[2],M=f*f+l*l+h*h;M>0&&(M=1/Math.sqrt(M),f*=M,l*=M,h*=M);let m=i*h-s*l,d=s*f-c*h,b=c*l-i*f;return t[0]=m,t[1]=d,t[2]=b,t[3]=0,t[4]=l*b-h*d,t[5]=h*m-f*b,t[6]=f*d-l*m,t[7]=0,t[8]=f,t[9]=l,t[10]=h,t[11]=0,t[12]=a,t[13]=o,t[14]=u,t[15]=1,t},e.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t},e.subtract=u,e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},e.equals=function(t,e){let n=t[0],a=t[1],o=t[2],u=t[3],c=t[4],i=t[5],s=t[6],f=t[7],l=t[8],h=t[9],M=t[10],m=t[11],d=t[12],b=t[13],g=t[14],p=t[15],v=e[0],w=e[1],x=e[2],y=e[3],A=e[4],_=e[5],E=e[6],R=e[7],q=e[8],L=e[9],S=e[10],T=e[11],P=e[12],B=e[13],F=e[14],U=e[15];return Math.abs(n-v)<=r.b*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(a-w)<=r.b*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(o-x)<=r.b*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(u-y)<=r.b*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(c-A)<=r.b*Math.max(1,Math.abs(c),Math.abs(A))&&Math.abs(i-_)<=r.b*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(s-E)<=r.b*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(f-R)<=r.b*Math.max(1,Math.abs(f),Math.abs(R))&&Math.abs(l-q)<=r.b*Math.max(1,Math.abs(l),Math.abs(q))&&Math.abs(h-L)<=r.b*Math.max(1,Math.abs(h),Math.abs(L))&&Math.abs(M-S)<=r.b*Math.max(1,Math.abs(M),Math.abs(S))&&Math.abs(m-T)<=r.b*Math.max(1,Math.abs(m),Math.abs(T))&&Math.abs(d-P)<=r.b*Math.max(1,Math.abs(d),Math.abs(P))&&Math.abs(b-B)<=r.b*Math.max(1,Math.abs(b),Math.abs(B))&&Math.abs(g-F)<=r.b*Math.max(1,Math.abs(g),Math.abs(F))&&Math.abs(p-U)<=r.b*Math.max(1,Math.abs(p),Math.abs(U))};var r=n(0);function a(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function o(t,e,n){let r=e[0],a=e[1],o=e[2],u=e[3],c=e[4],i=e[5],s=e[6],f=e[7],l=e[8],h=e[9],M=e[10],m=e[11],d=e[12],b=e[13],g=e[14],p=e[15],v=n[0],w=n[1],x=n[2],y=n[3];return t[0]=v*r+w*c+x*l+y*d,t[1]=v*a+w*i+x*h+y*b,t[2]=v*o+w*s+x*M+y*g,t[3]=v*u+w*f+x*m+y*p,v=n[4],w=n[5],x=n[6],y=n[7],t[4]=v*r+w*c+x*l+y*d,t[5]=v*a+w*i+x*h+y*b,t[6]=v*o+w*s+x*M+y*g,t[7]=v*u+w*f+x*m+y*p,v=n[8],w=n[9],x=n[10],y=n[11],t[8]=v*r+w*c+x*l+y*d,t[9]=v*a+w*i+x*h+y*b,t[10]=v*o+w*s+x*M+y*g,t[11]=v*u+w*f+x*m+y*p,v=n[12],w=n[13],x=n[14],y=n[15],t[12]=v*r+w*c+x*l+y*d,t[13]=v*a+w*i+x*h+y*b,t[14]=v*o+w*s+x*M+y*g,t[15]=v*u+w*f+x*m+y*p,t}function u(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}const c=o;e.mul=c;const i=u;e.sub=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.create=c,e.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},e.setAxisAngle=i,e.getAxisAngle=function(t,e){let n=2*Math.acos(e[3]),r=Math.sin(n/2);0!=r?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0);return n},e.multiply=s,e.rotateX=function(t,e,n){n*=.5;let r=e[0],a=e[1],o=e[2],u=e[3],c=Math.sin(n),i=Math.cos(n);return t[0]=r*i+u*c,t[1]=a*i+o*c,t[2]=o*i-a*c,t[3]=u*i-r*c,t},e.rotateY=function(t,e,n){n*=.5;let r=e[0],a=e[1],o=e[2],u=e[3],c=Math.sin(n),i=Math.cos(n);return t[0]=r*i-o*c,t[1]=a*i+u*c,t[2]=o*i+r*c,t[3]=u*i-a*c,t},e.rotateZ=function(t,e,n){n*=.5;let r=e[0],a=e[1],o=e[2],u=e[3],c=Math.sin(n),i=Math.cos(n);return t[0]=r*i+a*c,t[1]=a*i-r*c,t[2]=o*i+u*c,t[3]=u*i-o*c,t},e.calculateW=function(t,e){let n=e[0],r=e[1],a=e[2];return t[0]=n,t[1]=r,t[2]=a,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-a*a)),t},e.slerp=f,e.invert=function(t,e){let n=e[0],r=e[1],a=e[2],o=e[3],u=n*n+r*r+a*a+o*o,c=u?1/u:0;return t[0]=-n*c,t[1]=-r*c,t[2]=-a*c,t[3]=o*c,t},e.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},e.fromMat3=l,e.fromEuler=function(t,e,n,r){let a=.5*Math.PI/180;e*=a,n*=a,r*=a;let o=Math.sin(e),u=Math.cos(e),c=Math.sin(n),i=Math.cos(n),s=Math.sin(r),f=Math.cos(r);return t[0]=o*i*f-u*c*s,t[1]=u*c*f+o*i*s,t[2]=u*i*s-o*c*f,t[3]=u*i*f+o*c*s,t},e.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"};var r=n(0),a=n(4),o=n(5),u=n(6);function c(){let t=new r.a(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function i(t,e,n){n*=.5;let r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function s(t,e,n){let r=e[0],a=e[1],o=e[2],u=e[3],c=n[0],i=n[1],s=n[2],f=n[3];return t[0]=r*f+u*c+a*s-o*i,t[1]=a*f+u*i+o*c-r*s,t[2]=o*f+u*s+r*i-a*c,t[3]=u*f-r*c-a*i-o*s,t}function f(t,e,n,r){let a,o,u,c,i,s=e[0],f=e[1],l=e[2],h=e[3],M=n[0],m=n[1],d=n[2],b=n[3];return(o=s*M+f*m+l*d+h*b)<0&&(o=-o,M=-M,m=-m,d=-d,b=-b),1-o>1e-6?(a=Math.acos(o),u=Math.sin(a),c=Math.sin((1-r)*a)/u,i=Math.sin(r*a)/u):(c=1-r,i=r),t[0]=c*s+i*M,t[1]=c*f+i*m,t[2]=c*l+i*d,t[3]=c*h+i*b,t}function l(t,e){let n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{let r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);let a=(r+1)%3,o=(r+2)%3;n=Math.sqrt(e[3*r+r]-e[3*a+a]-e[3*o+o]+1),t[r]=.5*n,n=.5/n,t[3]=(e[3*a+o]-e[3*o+a])*n,t[a]=(e[3*a+r]+e[3*r+a])*n,t[o]=(e[3*o+r]+e[3*r+o])*n}return t}const h=u.b;e.clone=h;const M=u.g;e.fromValues=M;const m=u.c;e.copy=m;const d=u.l;e.set=d;const b=u.a;e.add=b;const g=s;e.mul=g;const p=u.k;e.scale=p;const v=u.d;e.dot=v;const w=u.i;e.lerp=w;const x=u.h;e.length=x;const y=x;e.len=y;const A=u.m;e.squaredLength=A;const _=A;e.sqrLen=_;const E=u.j;e.normalize=E;const R=u.f;e.exactEquals=R;const q=u.e;e.equals=q;const L=function(){let t=o.create(),e=o.fromValues(1,0,0),n=o.fromValues(0,1,0);return function(r,a,u){let c=o.dot(a,u);return c<-.999999?(o.cross(t,e,a),o.len(t)<1e-6&&o.cross(t,n,a),o.normalize(t,t),i(r,t,Math.PI),r):c>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(o.cross(t,a,u),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+c,E(r,r))}}();e.rotationTo=L;const S=function(){let t=c(),e=c();return function(n,r,a,o,u,c){return f(t,r,u,c),f(e,a,o,c),f(n,t,e,2*c*(1-c)),n}}();e.sqlerp=S;const T=function(){let t=a.create();return function(e,n,r,a){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=a[0],t[4]=a[1],t[7]=a[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],E(e,l(e,t))}}();e.setAxes=T},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.create=a,e.clone=function(t){let e=new r.a(2);return e[0]=t[0],e[1]=t[1],e},e.fromValues=function(t,e){let n=new r.a(2);return n[0]=t,n[1]=e,n},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},e.set=function(t,e,n){return t[0]=e,t[1]=n,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},e.subtract=o,e.multiply=u,e.divide=c,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},e.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},e.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t},e.distance=i,e.squaredDistance=s,e.length=f,e.squaredLength=l,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},e.normalize=function(t,e){var n=e[0],r=e[1],a=n*n+r*r;a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a);return t},e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},e.cross=function(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t},e.lerp=function(t,e,n,r){var a=e[0],o=e[1];return t[0]=a+r*(n[0]-a),t[1]=o+r*(n[1]-o),t},e.random=function(t,e){e=e||1;var n=2*r.c()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t},e.transformMat2=function(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[2]*a,t[1]=n[1]*r+n[3]*a,t},e.transformMat2d=function(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[2]*a+n[4],t[1]=n[1]*r+n[3]*a+n[5],t},e.transformMat3=function(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[3]*a+n[6],t[1]=n[1]*r+n[4]*a+n[7],t},e.transformMat4=function(t,e,n){let r=e[0],a=e[1];return t[0]=n[0]*r+n[4]*a+n[12],t[1]=n[1]*r+n[5]*a+n[13],t},e.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},e.equals=function(t,e){let n=t[0],a=t[1],o=e[0],u=e[1];return Math.abs(n-o)<=r.b*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(a-u)<=r.b*Math.max(1,Math.abs(a),Math.abs(u))};var r=n(0);function a(){let t=new r.a(2);return t[0]=0,t[1]=0,t}function o(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function u(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function c(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function i(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}function s(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function f(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)}function l(t){var e=t[0],n=t[1];return e*e+n*n}const h=f;e.len=h;const M=o;e.sub=M;const m=u;e.mul=m;const d=c;e.div=d;const b=i;e.dist=b;const g=s;e.sqrDist=g;const p=l;e.sqrLen=p;const v=function(){let t=a();return function(e,n,r,a,o,u){let c,i;for(n||(n=2),r||(r=0),i=a?Math.min(a*n+r,e.length):e.length,c=r;c<i;c+=n)t[0]=e[c],t[1]=e[c+1],o(t,t,u),e[c]=t[0],e[c+1]=t[1];return e}}();e.forEach=v},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(1),a=n(2);class o{constructor(t,e){this.matrix_=r.b.create(),this.mat4Position_=t,this.quatRotate_=e}move(t){r.e.scaleAndAdd(this.mat4Position_,this.mat4Position_,t,a.c)}rotate(t){let e=r.e.length(t)*a.b,n=r.c.setAxisAngle(r.c.create(),t,e);r.c.multiply(this.quatRotate_,this.quatRotate_,n),r.c.normalize(this.quatRotate_,this.quatRotate_)}getMatrix(){return r.b.fromRotationTranslation(r.b.create(),this.quatRotate_,this.mat4Position_)}}},function(t,e,n){"use strict";n.d(e,"c",function(){return r}),n.d(e,"f",function(){return a}),n.d(e,"e",function(){return o}),n.d(e,"a",function(){return u}),n.d(e,"b",function(){return c}),n.d(e,"d",function(){return i});var r=[0,0,0,1],a=.1,o=50,u=[0,0,-2],c=[0,0,0],i=[0,0,1]},function(t,e,n){"use strict";e.a=function(t,e){r=e;var n=document.getElementById(t);addEventListener("keydown",i),n.onmousedown=function(t){a=o.d.fromValues(t.pageX,t.pageY),n.onmousemove=c},n.onmouseup=function(t){n.onmousemove=void 0}};var r,a,o=n(1),u=(n(3),n(2));function c(t){let e=o.d.create();document.all?(e[0]=event.x+document.body.scrollLeft,e[1]=event.y+document.body.scrollTop):(e[0]=t.pageX,e[1]=t.pageY);let n=o.d.subtract(o.d.create(),e,a);r.camera_.rotate([n[1],n[0],0]),a=e,r.rend()}function i(t){switch(t.keyCode){case u.a.zoomUp:r.camera_.move(o.e.fromValues(0,0,1));break;case u.a.zoomDown:r.camera_.move(o.e.fromValues(0,0,-1));break;case u.a.left:r.camera_.move(o.e.fromValues(1,0,0));break;case u.a.forward:r.camera_.move(o.e.fromValues(0,-1,0));break;case u.a.right:r.camera_.move(o.e.fromValues(-1,0,0));break;case u.a.back:r.camera_.move(o.e.fromValues(0,1,0))}r.rend()}},function(t,e,n){"use strict";var r;function a(t,e){void 0!==r&&r.close(1e3,""),(r=new WebSocket("ws://localhost:3000/setConnect")).onmessage=e,r.onopen=function(e){console.log("WebSocket is connected."),r.send(t)},r.onclose=function(t){console.log("Close connection."),r=void 0}}n.d(e,"a",function(){return a})},function(t,e,n){"use strict";n.d(e,"a",function(){return a});const r={ply:n(18).a};function a(t,e){let n=r[t];if(void 0===n)return void alert("Unsupport format.");return n(e,{vertex:["x","y","z"],normals:["nx","ny","nz"],face:["vertex_indices"]})}},function(t,e,n){"use strict";n.d(e,"a",function(){return u});const r=/element +(\w+) +([0-9]+)/g,a=/ply([\w\W]+)end_header/g,o=/format (\w+)/g;function u(t,e){let n=new TextDecoder("utf-8").decode(new Uint8Array(t)).match(a);if(null===n)return void alert("Don`t find file head");let u=(n=n[0]).match(o);if(null===u)return void alert("Don`t find data format");let c=n.split(r);c.shift();let i=function(t){let e=new Array;for(let n=0;n<t.length;n+=3){let r=new Object;r.nameElem=t[n],r.count=Number.parseInt(t[n+1]),r.struct=new Object,t[n+2].split(/\r\n|\n/g).forEach(function(t){if(0!==t.length){let e=t.match(/\w+/g);if(e.length>1){let t=e.pop();r.struct[t]=new Object,r.struct[t].valType=e[1],"list"===r.struct[t].valType&&(r.struct[t].listSizeType=e[2],r.struct[t].listValType=e[3])}}}),e.push(r)}return e}(c);return"format ascii"===u[0]?function(t,e,n,r){let a=new Object;for(let t in e)a[t]=new Array;let o=new TextDecoder("utf-8").decode(new Uint8Array(r,n)).match(/[0-9. -]+/g),u=0;return t.forEach(function(t){let n=u;for(u+=t.count,a[t.nameElem]=new Array;n<u;n++){let r=o[n].match(/[0-9.-]+/g),u=0;for(let e in t.struct){let n=t.struct[e];switch(n.valType){case"float":n.data=parseFloat(r[u]);break;case"list":let t=parseInt(r[u]);u++,n.data=new Array;for(let e=0;e<t;e++)"float"===n.listValType?n.data.push(parseFloat(r[u])):n.data.push(parseInt(r[u])),u++;u--;break;default:n.data=parseInt(r[u])}u++}for(let n in e)for(let r in e[n]){let o=e[n][r];if(o in t.struct){let e=t.struct[o];a[n]=a[n].concat(e.data)}}}}),a}(i,e,n.length,t):void alert("Unknown data format")}}]);
//# sourceMappingURL=script.js.map